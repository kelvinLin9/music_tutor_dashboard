/* empty css                                                */import{q as S,x as h,_ as k,s as m,o as B,a as u,c as b,u as a,l as D,e as x,b as o,F as y,k as T,t as r,p as E,h as I}from"./index-EXnthD9K.js";import{L}from"./Loading-BQUuFhR3.js";import{h as d,l as A,m as N,n as F,o as G,S as M,p as V,u as $}from"./user-DonKoqfB.js";const q=S("couponStore",()=>{const e=h(!1),c=h([]),t=h({}),l=h({}),i=d(async()=>{e.value=!0;const s=await A();c.value=s.data.data,console.log("getCoupons",c.value)},()=>e.value=!1),v=d(async s=>{e.value=!0;const _=await N(s);t.value=_.data,console.log("getCoupon",t.value)},()=>e.value=!1),p=d(async()=>{e.value=!0;const s=await F(l.value);t.value=s.data,console.log("editCoupon",t.value)},()=>e.value=!1),f=d(async()=>{e.value=!0;const s=await G(l.value);console.log(s)},()=>e.value=!1),g=d(async s=>{M.fire({title:"確定要刪除這個優惠券嗎？",text:"你將無法撤銷此操作！",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"是的，刪除它！",cancelButtonText:"取消"}).then(_=>{_.isConfirmed&&(e.value=!0,V(s).then(n=>{console.log(n),i()}))})});return{couponLoading:e,coupons:c,coupon:t,couponTemp:l,getCoupons:i,getCoupon:v,editCoupon:p,addCoupon:f,deleteCoupon:g}}),C=e=>(E("data-v-b1b5e8df"),e=e(),I(),e),R={key:1,class:"card shadow bcoupon-0 mb-7 card-wrap"},U={class:"table-responsive"},j={class:"table table-hover table-nowrap"},z=C(()=>o("thead",{class:"thead-light"},[o("tr",null,[o("th",{scope:"col"},"Name"),o("th",{scope:"col"},"Coupon Code"),o("th",{scope:"col"},"Discount"),o("th",{scope:"col"},"Expiry Date"),o("th",{scope:"col"},"Enabled"),o("th",{scope:"col"},"Actions")])],-1)),H=["disabled","onClick"],J=C(()=>o("i",{class:"bi bi-pen text-white"},null,-1)),K=[J],O=["disabled","onClick"],P=C(()=>o("i",{class:"bi bi-trash text-white"},null,-1)),Q=[P],W=C(()=>o("tfoot",{class:"card-footer bcoupon-0"},null,-1)),X={__name:"Coupon",setup(e){const c=$(),{userInfo:t}=m(c),l=q(),{coupons:i,couponTemp:v,couponLoading:p}=m(l),f=l.getCoupons,g=l.deleteCoupon;return B(()=>{f()}),(s,_)=>(u(),b(y,null,[a(p)?(u(),D(L,{key:0,class:"position-absolute"})):x("",!0),a(p)?x("",!0):(u(),b("div",R,[o("div",U,[o("table",j,[z,o("tbody",null,[(u(!0),b(y,null,T(a(i),n=>(u(),b("tr",{key:n},[o("td",null,r(n.name),1),o("td",null,r(n.code),1),o("td",null,r(n.percentage)+"% ",1),o("td",null,r(n.expiryDate.split("T")[0]),1),o("td",null,r(n.isActive),1),o("td",null,[o("button",{class:"btn btn-primary me-2","data-bs-toggle":"modal","data-bs-target":"#couponDetailModal",disabled:a(t).role!=="superuser"&&a(t).role!=="admin",onClick:w=>v.value=n.items},K,8,H),o("button",{class:"btn btn-primary",disabled:a(t).role!=="superuser"&&a(t).role!=="admin",onClick:w=>a(g)(n._id)},Q,8,O)])]))),128))])])]),W]))],64))}},to=k(X,[["__scopeId","data-v-b1b5e8df"]]);export{to as default};
